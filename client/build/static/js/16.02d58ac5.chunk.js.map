{"version":3,"sources":["pages/Login.js"],"names":["Copyright","variant","color","align","to","Date","getFullYear","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Login","classes","useState","email","password","error","values","setValues","useContext","Context","store","dispatch","handleChange","name","event","target","value","component","maxWidth","isLoggedIn","className","noValidate","required","fullWidth","id","label","autoComplete","autoFocus","onChange","type","onClick","newValues","userData","isSignUp","connUser","then","res","user","data","payload","role","userId","_id","LOGIN","catch","e","console","log","container","item","xs","mt"],"mappings":"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","file":"static/js/16.02d58ac5.chunk.js","sourcesContent":["\nimport React, { useState, useContext } from 'react'\nimport Avatar from '@material-ui/core/Avatar'\nimport Button from '@material-ui/core/Button'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport TextField from '@material-ui/core/TextField'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Container from '@material-ui/core/Container'\nimport { connUser } from '../apis/auth-api'\nimport { Context } from '../global/Store'\nimport { Redirect, Link } from 'react-router-dom'\nimport {LOGIN} from '../helpers/constants'\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright Â© '}\n      <Link color=\"inherit\" to=\"/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  )\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}))\n\nconst Login = () => {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    error: null,\n  })\n  const [store, dispatch] = useContext(Context)\n\n  /**\n   * Handles form input\n   * @param {string} name - Name of the property to be changed.\n   */\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value })\n  }\n\n  /**\n   * Validates inputs and then submits user data to login.\n   */\n  const handleSubmit = () => {\n    const newValues = { ...values }\n    if (!newValues.password || !newValues.email) {\n      setValues({ ...values, error: \"Please fill in all fields\" })\n    } else {\n      const userData = {\n        email: newValues.email,\n        password: newValues.password,\n        isSignUp: false,\n      }\n      connUser(userData).then((res) => {\n        const user = res.data.user\n        const payload = {\n          isLoggedIn: true,\n          role: user.role,\n          userId: user._id\n        }\n        dispatch({ type: LOGIN, payload: payload })\n      })\n        .catch(e => {\n          console.log(e)\n          setValues({ ...values, error: 'Incorrect email or password' })\n        })\n    }\n\n  }\n\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      {store.isLoggedIn && <Redirect to='/dashboard' />}\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Log In\n        </Typography>\n        {\n          values.error && (<Typography component=\"p\" color=\"error\">\n            {values.error}\n          </Typography>)\n        }\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email Address\"\n            name=\"email\"\n            autoComplete=\"email\"\n            autoFocus\n            error={!values.email && values.error}\n            value={values.email}\n            onChange={handleChange('email')}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            error={!values.password && values.error}\n            value={values.password}\n            onChange={handleChange('password')}\n          />\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={handleSubmit}\n          >\n            Sign In\n          </Button>\n          <Grid container>\n            <Grid item xs>\n            </Grid>\n            <Grid item>\n              <Link to='/signup'>\n                \"Don't have an account? Sign Up\"\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  )\n}\n\nexport default Login"],"sourceRoot":""}